function init(){renderer=new THREE.WebGLRenderer({antialias:!0,alpha:!0}),renderer.setPixelRatio(window.devicePixelRatio),renderer.setSize(window.innerWidth,windowHeight);var e=document.createElement("div");e.id="three",e.appendChild(renderer.domElement),document.getElementById("masthead").appendChild(e),scene=new THREE.Scene,camera=new THREE.PerspectiveCamera(30,window.innerWidth/windowHeight,1,500),window.addEventListener("deviceorientation",setOrientationControls,!0);var t=THREE.ImageUtils.loadTexture(three_theme_root+"/img/cloud.png",null,animate);t.magFilter=THREE.LinearMipMapLinearFilter,t.minFilter=THREE.LinearMipMapLinearFilter;var n=new THREE.Fog(3303062,100,500);material=new THREE.ShaderMaterial({uniforms:{map:{type:"t",value:t},fogColor:{type:"c",value:n.color},fogNear:{type:"f",value:n.near},fogFar:{type:"f",value:n.far}},vertexShader:document.getElementById("vs").textContent,fragmentShader:document.getElementById("fs").textContent,depthWrite:!1,depthTest:!1,transparent:!0});for(var i=new THREE.Geometry,a=new THREE.Mesh(new THREE.PlaneGeometry(64,64)),r=0;2e3>r;r++)a.position.x=1e3*Math.random()-500,a.position.y=-Math.random()*Math.random()*200-20,a.position.z=r,a.rotation.z=Math.random()*Math.PI,a.scale.x=a.scale.y=Math.random()*Math.random()*1.5+.5,i.mergeMesh(a);mesh=new THREE.Mesh(i,material),scene.add(mesh),mesh=new THREE.Mesh(i,material),mesh.position.z=-500,scene.add(mesh),window.addEventListener("resize",onWindowResize,!1),window.addEventListener("orientationchange",onWindowResize,!1)}function setOrientationControls(e){e.alpha&&(enable_orientation_controls=!0,controls=new THREE.DeviceOrientationControls(camera,!0),window.removeEventListener("deviceorientation",setOrientationControls,!0))}function onWindowResize(e){camera.aspect=window.innerWidth/windowHeight,camera.updateProjectionMatrix(),renderer.setSize(window.innerWidth,windowHeight)}function animate(){position=.01*(Date.now()-start_time)%2e3,camera.position.z=-position+2e3,enable_orientation_controls&&controls.device_update(),requestAnimationFrame(animate),renderer.render(scene,camera)}!function(e){if(e(".home").length){var t=e('<div id="nav-icon" />');t.html('<a class="scroll" data-speed="1000" href="#main"><span class="dashicons dashicons-arrow-down-alt2"></span></a>'),e("#masthead").append(t),e("a.scroll").click(function(){var t=500,n=e(this).attr("href"),i=e("#"==n||""==n?"html":n),a=i.offset().top;return e("html, body").animate({scrollTop:a},t,"swing"),!1})}}(jQuery),Detector.webgl||Detector.addGetWebGLMessage(),THREE.DeviceOrientationControls.prototype.device_update=function(){if(this.enabled!==!1){var e=this.deviceOrientation.alpha?THREE.Math.degToRad(this.deviceOrientation.alpha):0,t=this.deviceOrientation.beta?THREE.Math.degToRad(this.deviceOrientation.beta):0,n=this.deviceOrientation.gamma?THREE.Math.degToRad(this.deviceOrientation.gamma):0,i=this.screenOrientation?THREE.Math.degToRad(this.screenOrientation):0;setObjectQuaternion(this.object.quaternion,e,t,n,i)}};var setObjectQuaternion=function(){var e=new THREE.Vector3(0,0,1),t=new THREE.Euler,n=new THREE.Quaternion,i=new THREE.Quaternion(-Math.sqrt(.5),0,0,Math.sqrt(.5));return function(a,r,o,d,s){1.2>o&&(o=1.2),t.set(o,r,-d,"YXZ"),a.setFromEuler(t),a.multiply(i),a.multiply(n.setFromAxisAngle(e,-s))}}(),container,camera,scene,renderer,controls,enable_orientation_controls,mesh,geometry,material,start_time=Date.now(),windowHeight;windowHeight=is_home?window.innerHeight:jQuery("#masthead").height(),init();